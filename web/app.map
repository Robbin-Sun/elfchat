{"version":3,"file":"app.js","sources":["/Users/anton/Sites/chat.dev/web/src/Config.js","/Users/anton/Sites/chat.dev/web/src/Helpers.js","@traceur/generated/TemplateParser/0","/Users/anton/Sites/chat.dev/web/src/Server/AbstractServer.js","@traceur/generated/TemplateParser/1","/Users/anton/Sites/chat.dev/web/src/Server/WebSocketServer.js","@traceur/generated/TemplateParser/2","@traceur/generated/TemplateParser/4","@traceur/generated/TemplateParser/3","/Users/anton/Sites/chat.dev/web/src/Notify.js","/Users/anton/Sites/chat.dev/web/src/Sound.js","/Users/anton/Sites/chat.dev/web/src/Scroll.js","/Users/anton/Sites/chat.dev/web/src/Popover.js","/Users/anton/Sites/chat.dev/web/src/Views.js","@traceur/generated/TemplateParser/5","/Users/anton/Sites/chat.dev/web/src/Users.js","@traceur/generated/TemplateParser/6","/Users/anton/Sites/chat.dev/web/src/Emotion.js","/Users/anton/Sites/chat.dev/web/src/Filters.js","@traceur/generated/TemplateParser/7","/Users/anton/Sites/chat.dev/web/src/Application.js"],"names":[],"mappings":"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","sourcesContent":["/* (c) Anton Medvedev <anton@elfet.ru>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\n// Configure Mustache\nMustache.tags = ['[', ']'];","/* (c) Anton Medvedev <anton@elfet.ru>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\n/**\n * Check if an element exist in DOM.\n */\n$.fn.exist = function () {\n    return $(this).length > 0;\n};\n\n/**\n * Translate given message.\n * @param {String} message\n * @returns {String}\n */\nfunction tr(message) {\n    return window.lang[message] ? window.lang[message] : message;\n}\n\n/**\n *\n * @param {String} message\n * @param {Object} params\n * @returns {String}\n */\nfunction format(message, params = {}) {\n    var key, value;\n\n    for (key in params) if (params.hasOwnProperty(key)) {\n        value = params[key];\n        message = message.split('%' + key + '%').join(value);\n    }\n    return message;\n};","var $__placeholder__0 = $__placeholder__1","/* (c) Anton Medvedev <anton@elfet.ru>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nclass AbstractServer {\n    constructor() {\n        this.connected = false;\n    }\n\n    connect() {\n        // You need to implement this.\n    }\n\n    send(text) {\n        // You need to implement this.\n    }\n\n    sendPrivate(userId, text) {\n        // You need to implement this.\n    }\n\n    onData(receive) {\n        var json = JSON.parse(receive.data);\n        var type = json[0];\n        var data = json[1];\n\n        switch (type) {\n            case 0:\n                this.onSynchronize(data);\n                break;\n\n            case 1:\n                this.onUserJoin(data);\n                break;\n\n            case 2:\n                this.onUserLeave(data);\n                break;\n\n            case 3:\n                this.onMessage(data);\n                break;\n\n            default:\n                throw new Error('Unknown message type received from server.');\n        }\n    }\n\n    onConnect() {\n        this.connected = true;\n        $(window).trigger('connect');\n    }\n\n    onDisconnect() {\n        if (this.connected) {\n            this.connected = false;\n            $(window).trigger('disconnect');\n        }\n    }\n\n    onSynchronize(users) {\n        $(window).trigger('synchronize', users);\n    }\n\n    onUserJoin(user) {\n        $(window).trigger('user_join', user);\n    }\n\n    onUserLeave(user) {\n        $(window).trigger('user_leave', user);\n    }\n\n    onMessage(message) {\n        $(window).trigger('message', message);\n    }\n\n    onError(error) {\n        console.error(error);\n    }\n}","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2)","/* (c) Anton Medvedev <anton@elfet.ru>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nclass WebSocketServer extends AbstractServer {\n    constructor(server, port) {\n        super();\n        this.socket = null;\n        this.server = server;\n        this.port = port;\n        this.reconnect = null;\n    }\n\n    connect() {\n        this.socket = new WebSocket('ws://' + this.server + ':' + this.port);\n\n        this.socket.onopen = () => {\n            this.onConnect();\n            clearInterval(this.reconnect);\n        };\n\n        this.socket.onclose = (event) => {\n            if (event.wasClean) {\n                this.onDisconnect();\n            } else {\n                this.onDisconnect();\n\n                clearInterval(this.reconnect);\n                this.reconnect = setInterval(() => {\n                    this.connect();\n                }, 1000);\n            }\n        };\n\n        this.socket.onmessage = (receive) => {\n            this.onData(receive);\n        };\n\n        this.onerror = (error) => {\n            this.onError(error.message);\n        };\n    }\n\n    send(text) {\n        this.socket.send(text);\n    }\n\n    sendPrivate(userId, text) {\n    }\n}","$traceurRuntime.superCall($__placeholder__0, $__placeholder__1, $__placeholder__2,\n                                   $__placeholder__3)","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2,\n                                       $__placeholder__3)","/* (c) Anton Medvedev <anton@elfet.ru>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nfunction Notify() {\n    this.error = function (error) {\n//        return $.notification({\n//            title: tr('Error'),\n//            content: error,\n//            icon: 'fa fa-info',\n//            error: true\n//        });\n    };\n\n    this.alert = function (text) {\n//        return $.notification({\n//            title: tr('Info'),\n//            content: text,\n//            icon: 'fa fa-info'\n//        });\n    };\n\n    var connecting = null;\n    this.connecting = {\n        start: function () {\n//            if (connecting != null) {\n//                connecting.hide();\n//            }\n//            return connecting = $.notification({\n//                content: tr('Connecting'),\n//                icon: 'fa fa-spinner fa-spin'\n//            });\n        },\n        stop: function () {\n//            return connecting.remove();\n        }\n    }\n}","/* (c) Anton Medvedev <anton@elfet.ru>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nclass Sound {\n    constructor() {\n        this.message = this.create(window.config.sound.message);\n        this.join = this.create(window.config.sound.join);\n    }\n\n    create(file) {\n        return new Howl({\n            urls: [file]\n        });\n    }\n}\n\n","/* (c) Anton Medvedev <anton@elfet.ru>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nclass Scroll {\n    constructor(div) {\n        var _this = this;\n\n        this.div = div;\n        this.able = true;\n        this.scrolling = 0;\n        this.div.on('scroll', function(e) {\n            if (_this.scrolling === 0) {\n                return _this.able = _this.div.scrollTop() + _this.div.outerHeight() + 10 > _this.div[0].scrollHeight;\n            }\n        });\n    }\n\n    down(){\n        var _this = this;\n\n        if (this.able) {\n            this.scrolling += 1;\n            return this.div.scrollTo('100%', 300, {\n                onAfter: function() {\n                    return _this.scrolling -= 1;\n                }\n            });\n        }\n    }\n\n    instantlyDown() {\n        return this.div.scrollTo('100%', 0);\n    }\n}","/* (c) Anton Medvedev <anton@elfet.ru>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nvar popovers = {};\n\nclass Popover {\n    constructor(id, button = null, box = '.box') {\n        var _this = this;\n\n        this.id = id;\n        this.box = $(box);\n        this.margin = 10;\n        this.onTop = 'top';\n        this.onBottom = 'bottom';\n        this.onLeft = 'left';\n        this.onRight = 'right';\n        this.autohide = false;\n\n        if (button !== null) {\n            this.on(button);\n        }\n\n        $(window).resize(function () {\n            return _this.reposition();\n        });\n\n        $('body').mouseup((event) => {\n            if (_this.autohide && _this.getPopover().has(event.target).length === 0) {\n                _this.hide();\n            }\n        });\n    }\n\n    static create(id, button) {\n        if (popovers[id]) {\n            return popovers[id].on(button);\n        } else {\n            return popovers[id] = new Popover(id, button);\n        }\n    }\n\n    static get(id) {\n        return popovers[id];\n    }\n\n    on(button) {\n        var _this = this;\n        this.button = $(button);\n        this.button.mousedown((event) => {\n            _this.autohide = false;\n        });\n        return this;\n    }\n\n    reposition() {\n        var arrow, arrowPosition, boxSize, buttonOffset, buttonSize, offset, over, popover, popoverPosition, popoverSize;\n\n        arrow = this.getArrow();\n        popover = this.getPopover();\n        boxSize = {\n            width: this.box.width(),\n            height: this.box.height()\n        };\n        buttonOffset = this.button.offset();\n        buttonSize = {\n            width: this.button.outerWidth(),\n            height: this.button.outerHeight()\n        };\n        popoverSize = {\n            width: popover.outerWidth(),\n            height: popover.outerHeight()\n        };\n        if (popover.hasClass(this.onLeft) || popover.hasClass(this.onRight)) {\n            if (popover.hasClass(this.onLeft)) {\n                popoverPosition = {\n                    top: buttonOffset.top - (popoverSize.height / 2) + (buttonSize.height / 2),\n                    left: buttonOffset.left - popoverSize.width\n                };\n            } else {\n                popoverPosition = {\n                    top: buttonOffset.top - (popoverSize.height / 2) + (buttonSize.height / 2),\n                    left: buttonOffset.left + buttonSize.width\n                };\n            }\n            arrowPosition = {\n                top: popoverSize.height / 2\n            };\n            if ((over = popoverPosition.top + popoverSize.height) > boxSize.height) {\n                offset = over - boxSize.height + this.margin;\n                popoverPosition.top -= offset;\n                arrowPosition.top += offset;\n            }\n            if ((over = popoverPosition.top) < 0) {\n                offset = -over + this.margin;\n                popoverPosition.top += offset;\n                arrowPosition.top -= offset;\n            }\n        } else {\n            popoverPosition = {\n                top: buttonSize.height + buttonOffset.top,\n                left: buttonOffset.left - (popoverSize.width / 2) + (buttonSize.width / 2)\n            };\n            arrowPosition = {\n                left: popoverSize.width / 2\n            };\n            if (popoverPosition.top + popoverSize.height > boxSize.height || popover.hasClass(this.onTop)) {\n                popoverPosition.top = buttonOffset.top - popoverSize.height;\n            }\n            if ((over = popoverPosition.left + popoverSize.width) > boxSize.width) {\n                offset = over - boxSize.width + this.margin;\n                popoverPosition.left -= offset;\n                arrowPosition.left += offset;\n            }\n            if ((over = popoverPosition.left) < 0) {\n                offset = -over + this.margin;\n                popoverPosition.left += offset;\n                arrowPosition.left -= offset;\n            }\n        }\n        popover.css(popoverPosition);\n        arrow.css(arrowPosition);\n    }\n\n    show() {\n        this.reposition();\n        this.getPopover().show();\n        return this.autohide = true;\n    }\n\n    hide() {\n        return this.getPopover().hide();\n    }\n\n    toggle() {\n        this.reposition();\n        this.getPopover().toggle();\n        return this.autohide = true;\n    }\n\n    getPopover() {\n        return $('#' + this.id);\n    }\n\n    getArrow() {\n        return this.getPopover().find('.arrow');\n    }\n}\n\n","/* (c) Anton Medvedev <anton@elfet.ru>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\nvar templates = {};\nfunction template(name) {\n    if (!templates[name]) {\n        var t = $('#view_' + name.split('/').join('_'));\n\n        if (t.length === 0) {\n            throw new Error('View \"' + name + '\" does not exist.');\n        }\n\n        templates[name] = Mustache.compile(t.html());\n    }\n\n    return templates[name];\n}\n\nclass View {\n    render() {\n        throw new TypeError('View class must implement render() method.');\n    }\n\n    toString() {\n        return this.render();\n    }\n}\n\n\nclass UserView extends View {\n    constructor(user) {\n        this.user = user;\n    }\n\n    render() {\n        return template('chat/tab/user')({user: this.user});\n    }\n}\n\nclass MessageView extends View {\n    constructor(message) {\n        this.id = message.id;\n        this.time = moment(message.datetime).format('HH:mm:ss');\n        this.text = this.filter(this.escape(message.text));\n        this.user = message.user;\n\n        this.spirit = false;\n        if (this.text.match(/^∞/)) {\n            this.text = this.text.substring(1);\n            this.spirit = true;\n        }\n    }\n\n    render() {\n        return template(this.spirit ? 'chat/board/spirit' : 'chat/board/message')(this);\n    }\n\n    escape(html) {\n        return html.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/'/g, '&apos;');\n    }\n\n    filter(text) {\n        for (var filter of window.chat.filters) {\n            text = filter.filter(text);\n        }\n        return text;\n    }\n}\n\nclass LogView extends MessageView {\n    constructor(text) {\n        super({id: 0, time: new Date(), user: null, text});\n    }\n\n    render() {\n        return template('chat/board/log')(this);\n    }\n}\n\n\nclass UserProfileView extends View {\n    constructor(user) {\n        this.id = 'profile-' + user.id;\n        this.user = user;\n    }\n\n    render() {\n        return template('chat/popover/profile')(this);\n    }\n\n    remove() {\n        $('#' + this.id).remove();\n    }\n\n    exist() {\n        return $('#' + this.id).exist();\n    }\n}\n\nclass EmotionTabView extends View {\n    constructor(title, emotions) {\n        this.title = title;\n        this.emotions = emotions;\n    }\n\n    render() {\n        return template('chat/emotion/tab')(this);\n    }\n}\n\nclass EmotionImageView extends View {\n    constructor(src) {\n        this.src = src;\n    }\n\n    render() {\n        return template('chat/emotion/image')(this);\n    }\n}\n","\n        for (var $__placeholder__0 =\n                 $__placeholder__1[Symbol.iterator](),\n                 $__placeholder__2;\n             !($__placeholder__3 = $__placeholder__4.next()).done; ) {\n          $__placeholder__5;\n          $__placeholder__6;\n        }","/* (c) Anton Medvedev <anton@elfet.ru>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nclass Users {\n    constructor() {\n        this.dom = {\n            users: $('#users'),\n            user(user) {\n                return $('#user-' + user.id);\n            }\n        };\n\n        // Users data\n        this.users = {};\n\n        // Bind to server commands\n        $(window)\n            .on('synchronize', $.proxy(this.onSynchronize, this))\n            .on('user_join', $.proxy(this.onUserJoin, this))\n            .on('user_leave', $.proxy(this.onUserLeave, this))\n            .on('user_update', $.proxy(this.onUserUpdate, this));\n\n        // Collect user data from recent messages\n        for (var message of window.recent) {\n            this.addUser(message.user);\n        }\n    }\n\n    onSynchronize(event, ...users) {\n        // Clear all users tabs\n        this.dom.users.html('');\n\n        for (var user of users) {\n            // Save user data\n            this.addUser(user);\n\n            // Add user tab\n            this.dom.users.append(new UserView(user).render());\n        }\n    }\n\n    onUserJoin(event, user) {\n        // Save user data\n        this.addUser(user);\n\n        // Add to DOM\n        var tab = this.dom.user(user);\n        var view = new UserView(user);\n        if (tab.exist()) {\n            tab.remove();\n        }\n        this.dom.users.append(view.render());\n    }\n\n    onUserLeave(event, user) {\n        // Remove from DOM\n        var tab = this.dom.user(user);\n        if (tab.exist()) {\n            tab.remove();\n        }\n    }\n\n    onUserUpdate(event, user) {\n        // Update user data\n        this.addUser(user);\n\n        // Update DOM\n        var tab = this.dom.user(user);\n\n        if (tab.exist()) {\n            tab.replaceWith(window.views.user(user));\n        } else {\n            this.dom.users.append(window.views.user(user));\n        }\n    }\n\n    getUser(id) {\n        if (this.isUserExist(id)) {\n            return this.users[id];\n        } else {\n            // TODO: Load from server data of user.\n            throw new Error('Need to load data from server.');\n        }\n    }\n\n    isUserExist(id) {\n        return this.users[id] !== void 0;\n    }\n\n    addUser(user) {\n        this.users[user.id] = user;\n    }\n}","\n            for (var $__placeholder__0 = [], $__placeholder__1 = $__placeholder__2;\n                 $__placeholder__3 < arguments.length; $__placeholder__4++)\n              $__placeholder__5[$__placeholder__6 - $__placeholder__7] = arguments[$__placeholder__8];","/* (c) Anton Medvedev <anton@elfet.ru>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nclass Emotion {\n    constructor() {\n        this.dom = {\n            popover: $('#emotions'),\n            content: $('#emotions .content'),\n            button: $('button[data-popover=\"emotions\"]'),\n            textarea: $('footer textarea')\n        };\n        this.currentTab = 0;\n        if (EmotionCatalog) {\n            this.tabs = new EmotionTabs(EmotionCatalog);\n            this.bind();\n        }\n    }\n\n    onButtonClick(event) {\n        this.render();\n    }\n\n    render() {\n        this.dom.content.html(this.tabs.render());\n\n        var wait = [];\n        this.dom.content.find('img').each(function (index, img) {\n            var deferred = $.Deferred();\n            img.onload = function () {\n                return deferred.resolve();\n            };\n            wait.push(deferred);\n        });\n\n        $.when.apply($, wait).done(function () {\n            Popover.get('emotions').reposition();\n        });\n    }\n\n\n    bind() {\n        var _this = this;\n\n        this.dom.button.one('click', function () {\n            _this.render();\n        });\n\n        _this.dom.button.click(function () {\n            _this.dom.textarea.focus();\n        });\n\n        _this.dom.popover.on('click', function () {\n            return _this.dom.textarea.focus();\n        });\n\n        _this.dom.popover.on('click', '.left', function () {\n            _this.currentTab--;\n            if (_this.currentTab < 0) {\n                _this.currentTab = _this.tabs.max - 1;\n            }\n            return _this.dom.content.scrollTo(_this.getTab(_this.currentTab), 300);\n        });\n\n        _this.dom.popover.on('click', '.right', function () {\n            _this.currentTab++;\n            if (_this.currentTab >= _this.tabs.max) {\n                _this.currentTab = 0;\n            }\n            return _this.dom.content.scrollTo(_this.getTab(_this.currentTab), 300);\n        });\n\n        _this.dom.popover.on('click', '[data-emotion]', function () {\n            var emotion = $(this).attr('data-emotion');\n            return _this.dom.textarea.insertAtCaret(\" \" + emotion + \" \");\n        });\n    }\n\n    getTab(i) {\n        return this.dom.content.find(\".tab:eq(\" + i + \")\");\n    }\n}\n\nclass EmotionTabs {\n    constructor(catalog) {\n        this.pertab = 28;\n        this.catalog = catalog;\n        this.n = 0;\n        this.emotions = [];\n        this.max = 0;\n    }\n\n    render() {\n        var html = '';\n\n        for (var title in this.catalog) if (this.catalog.hasOwnProperty(title)) {\n            var tab = this.catalog[title];\n            for (var emotion of tab) {\n                this.emotions.push(emotion);\n\n                if (this.n >= this.pertab - 1) {\n                    html += this.renderTab(title, this.emotions);\n                } else {\n                    this.n++;\n                }\n            }\n            if (this.n !== 0) {\n                html += this.renderTab(title, this.emotions);\n            }\n        }\n\n        return html;\n    }\n\n\n    renderTab(title, emotions) {\n        this.n = 0;\n        this.emotions = [];\n        this.max++;\n        return new EmotionTabView(tr(title), emotions).render();\n    }\n}","/* (c) Anton Medvedev <anton@elfet.ru>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nclass Filter {\n\n    filter(html) {\n        return this.explode(html, {\n            tag: $.proxy(this.tag, this),\n            text: $.proxy(this.text, this)\n        });\n    }\n\n    explode(html, map) {\n        var array, i, length, part, tag, text, _i, _ref, _ref1;\n        if (map == null) {\n            map = null;\n        }\n        array = [''];\n        length = html.length;\n        part = 0;\n        for (i = _i = 0; 0 <= length ? _i <= length : _i >= length; i = 0 <= length ? ++_i : --_i) {\n            if (html.charAt(i) === '<') {\n                array.push('');\n                part++;\n            }\n            array[part] += html.charAt(i);\n            if (html.charAt(i) === '>') {\n                array.push('');\n                part++;\n            }\n        }\n        tag = (_ref = map.tag) != null ? _ref : function (value) {\n            return value;\n        };\n        text = (_ref1 = map.text) != null ? _ref1 : function (value) {\n            return value;\n        };\n        array = array.map(function (value, n) {\n            if (value === '') {\n                return value;\n            }\n            if (n % 2 === 1) {\n                return tag(value);\n            } else {\n                return text(value);\n            }\n        });\n        return array.join('');\n    }\n}\n\n\nclass BBCodeFilter extends Filter {\n    text(text) {\n        // \" is &quot;\n        // / is &#x2f;\n\n        // Background\n        text = text.replace(/\\[bg=([#0-9a-z]{1,20})\\]((?:.(?!\\[bg))*)\\[\\/bg\\]/ig, '<span style=\"background-color:$1;\">$2</span>');\n\n        // Color\n        text = text.replace(/\\[color=([#0-9a-z]{1,20})\\]((?:.(?!\\[color))*)\\[\\/color\\]/ig, '<span style=\"color:$1;\">$2</span>');\n\n        // Bold, italic, ext.\n        text = text.replace(/\\[b\\]((?:.(?!\\[b\\]))*)\\[\\/b\\]/ig, '<b>$1</b>');\n        text = text.replace(/\\[i\\]((?:.(?!\\[i\\]))*)\\[\\/i\\]/ig, '<i>$1</i>');\n        text = text.replace(/\\[s\\]((?:.(?!\\[s\\]))*)\\[\\/s\\]/ig, '<s>$1</s>');\n\n        // Marquee\n        text = text.replace(/\\[m\\]((?:.(?!\\[s\\]))*)\\[\\/m\\]/ig, '<marquee>$1</marquee>');\n\n        // Blockquote\n        text = text.replace(/\\[quote([^\\]]*)\\]((?:.(?!\\[quote))*)\\[\\/quote\\]/ig, function (m, p1, p2) {\n            var info, msg, name, quote, time;\n            info = '';\n            quote = '';\n            msg = p1.match(/msg=&quot;([0-9]*)&quot;/);\n            if (msg !== null && msg[1] !== '') {\n                quote = ' ref=\"' + msg[1] + '\"';\n            }\n            time = p1.match(/time=&quot;([\\.:0-9]*)&quot;/);\n            if (time !== null && time[1] !== '') {\n                info += '<i>' + time[1] + '</i> ';\n            }\n            name = p1.match(/name=&quot;(.*)&quot;/);\n            if (name !== null && name[1] !== '') {\n                info += name[1];\n            }\n            if (info !== '') {\n                info = '&copy; ' + info + ': ';\n            }\n            return '<blockquote' + quote + '>' + info + p2 + '</blockquote>';\n        });\n\n        return text;\n    }\n}\n\n\nclass RestrictionFilter extends Filter {\n    constructor() {\n        this.maximumLengthOfWords = 100;\n        this.maximumNumberOfLines = 20;\n    }\n\n    filter(html) {\n        var linesCount,\n            _this = this;\n\n        // loo...oong words\n        html = this.explode(html, {\n            text: function (text) {\n                return text.replace(new RegExp('[^\\\\s]{' + _this.maximumLengthOfWords + ',}', 'g'), function (all) {\n                    return all.substr(0, 20) + '...' + all.substr(all.length - 20, all.length);\n                });\n            }\n        });\n\n        // a lot of spaces\n        html = html.replace(/([\\s]{100,})/g, function (all) {\n            return all.substr(0, 100);\n        });\n\n        // empty lines:\n        html = html.replace(/(\\n){3,}/g, '\\n\\n');\n\n        // maximum number of lines:\n        linesCount = 0;\n        html = html.replace(/[\\n\\r\\t]/g, function (all) {\n            if (++linesCount < _this.maximumNumberOfLines) {\n                return '\\n';\n            } else {\n                return ' ';\n            }\n        });\n\n        return html;\n    }\n}\n\n\nclass UriFilter extends Filter {\n    constructor() {\n        var _ref, _ref1, _ref2;\n\n        this.imageable = true;\n        this.imageCount = 0;\n        this.maxImages = 3;\n        this.regex = /(https?):\\/\\/((?:[a-z0-9.-]|%[0-9A-F]{2}){3,})(?::(\\d+))?((?:\\/(?:[a-z0-9-._~!$&'()*+,;=:@]|%[0-9A-F]{2})*)*)(?:\\?((?:[a-z0-9-._~!$&'()*+,;=:\\/?@]|%[0-9A-F]{2})*))?(?:#((?:[a-z0-9-._~!$&'()*+,;=:\\/?@]|%[0-9A-F]{2})*))?/ig;\n    }\n\n    text(text) {\n        this.images = 0;\n        return text = text.replace(this.regex, $.proxy(this.callback, this));\n    }\n\n    callback(uri, p1, p2, p3, p4, p5, p6, p7, p8, p9) {\n        var ext, id, img, text, _ref,\n            _this = this;\n\n        text = uri;\n        ext = uri.match(/\\.([a-z0-9]+)$/i);\n        if (((_ref = ext != null ? ext[1] : void 0) === 'jpg' || _ref === 'jpeg' || _ref === 'png' || _ref === 'gif') && this.imageable && this.images++ < this.maxImages) {\n            this.imageCount += 1;\n            id = 'external-img-' + this.imageCount;\n            text = \"<img class=\\\"external\\\" id=\\\"\" + id + \"\\\" src=\\\"\" + uri + \"\\\">\";\n            img = new Image();\n            img.src = uri;\n            img.onload = function () {\n                return (function (id, uri) {\n                    var height;\n\n                    height = $('#' + id).height();\n\n                    window.scroll.down();\n                })(id, uri);\n            };\n        }\n        return \"<a href=\\\"\" + uri + \"\\\" target=\\\"_blank\\\">\" + text + \"</a>\";\n    }\n}\n\nclass EmotionFilter extends Filter {\n    constructor(list) {\n        this.list = list;\n        this.max = 20;\n    }\n\n    text(text) {\n        var _this = this;\n\n        var count = 0;\n        text = text.replace(/&apos;/g, \"'\");\n        for (var row of this.list) {\n            var regexp = row[0];\n            var src = row[1];\n            text = text.replace(regexp, (str) => {\n                count++;\n                if (count > _this.max) {\n                    return str;\n                } else {\n                    return new EmotionImageView(src).render();\n                }\n            });\n        }\n        text = text.replace(/'/g, '&apos;');\n        return text;\n    }\n}","$traceurRuntime.defaultSuperCall(this,\n                $__placeholder__0.prototype, arguments)","/* (c) Anton Medvedev <anton@elfet.ru>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nclass Application {\n    constructor(server) {\n        this.server = server;\n        this.filters = [];\n\n        this.dom = {\n            chat: $('#chat'),\n            textarea: $('#message'),\n            body: $('body')\n        };\n\n        $(window)\n            .on('connect', $.proxy(this.onConnect, this))\n            .on('disconnect', $.proxy(this.onDisconnect, this))\n            .on('message', $.proxy(this.onMessage, this))\n            .on('user_join', $.proxy(this.onUserJoin, this))\n            .on('user_leave', $.proxy(this.onUserLeave, this))\n            .on('error', $.proxy(this.onError, this));\n\n        $(document)\n            .on('click.popover', '[data-popover]', $.proxy(this.onPopoverClick, this))\n            .on('click.profile', '[data-user-id]', $.proxy(this.onProfileClick, this))\n            .on('click.username', '[data-user-name]', $.proxy(this.onUsernameClick, this));\n\n        $(this.dom.textarea)\n            .bind('keydown', 'return', $.proxy(this.onSend, this));\n\n        this.filters = [\n            new BBCodeFilter(),\n            new UriFilter(),\n            new EmotionFilter(EmotionList),\n            new RestrictionFilter()\n        ];\n    }\n\n    run() {\n        notify.connecting.start();\n        this.server.connect();\n        this.addRecentMessages();\n    }\n\n    onSend(event) {\n        this.server.send(this.dom.textarea.val());\n        this.dom.textarea.val('');\n\n        event.stopPropagation();\n        return false;\n    }\n\n    onConnect(event) {\n        notify.connecting.stop();\n    }\n\n    onDisconnect(event) {\n        notify.connecting.start();\n    }\n\n    onMessage(event, message) {\n        this.addMessage(message);\n        window.sound.message.play();\n    }\n\n    onMessageRemove(event, message) {\n        // Remove message from chat\n    }\n\n    addRecentMessages() {\n        for (var message of window.recent) {\n            this.addMessage(message);\n        }\n        window.scroll.instantlyDown();\n    }\n\n    onUserJoin(event, user) {\n        // Add user login message\n        this.addLog(format(tr('%name% joins the chat.'), {'name': user.name}));\n\n        // Play sound\n        window.sound.join.play();\n    }\n\n    onUserLeave(event, user) {\n        // Add user logout message\n        this.addLog(format(tr('%name% leaves the chat.'), {'name': user.name}));\n    }\n\n    onPopoverClick(event) {\n        event.stopPropagation();\n\n        var button = $(event.target);\n        var id = button.attr('data-popover');\n        var popover = Popover.create(id, button);\n\n        popover.toggle();\n    }\n\n    onProfileClick(event) {\n        event.stopPropagation();\n\n        var button = $(event.target);\n        var user = window.users.getUser(button.attr('data-user-id'));\n\n        if (user) {\n            var view = new UserProfileView(user);\n\n            if (!view.exist()) {\n                this.dom.body.append(view.render());\n            }\n\n            var popover = Popover.create(view.id, button);\n            popover.toggle();\n        }\n    }\n\n    addMessage(message) {\n        if (message !== undefined) {\n            this.dom.chat.append(new MessageView(message).render());\n            window.scroll.down();\n        }\n    }\n\n    addLog(log) {\n        if (log !== undefined) {\n            this.dom.chat.append(new LogView(log).render());\n            window.scroll.down();\n        }\n    }\n\n    onUsernameClick(event) {\n        var name = $(event.target).attr('data-user-name');\n        this.dom.textarea.insertAtCaret(' ' + name + ' ');\n    }\n\n    onError(event, error) {\n        notify.error(tr(error));\n    }\n}"]}